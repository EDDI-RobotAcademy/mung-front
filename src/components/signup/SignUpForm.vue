<template>
  <div class="min-h-screen bg-gray-100">
    <div class="flex justify-center max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <!-- ì¤‘ì•™ ê²Œì‹œíŒ -->
      <form @submit.prevent="onSubmit()" ref="form">
        <div class="py-10 mx-auto col-span-6">
          <div class="bg-white rounded-lg shadow p-10">
            <div class="mx-8 py-8 flex justify-center">
              <div class="table-row">
                <h2 class="text-3xl font-medium">ğŸ¶ Join MungMung ğŸ’œ</h2>
                <div class="container h-10"></div>
                <!--ì´ë©”ì¼ ì¸í’‹-->
                <p class="text-sm">ì´ë©”ì¼</p>
                <input
                  class="h-10 w-full border"
                  v-model="email"
                  @input="emailValidate"
                  type="text"
                  maxlength="50"
                  placeholder=" ì´ë©”ì¼ì„ ì…ë ¥í•˜ì„¸ìš”"
                  required
                />
                <p class="text-xs text-red-600" v-show="email.length > 0 && !emailPass">
                  ì´ë©”ì¼ ì£¼ì†Œë¥¼ ì •í™•íˆ ì…ë ¥í•˜ì„¸ìš”
                </p>
                <div class="container h-5"></div>
                <!--ë¹„ë°€ë²ˆí˜¸ ì¸í’‹-->
                <p class="text-sm">ë¹„ë°€ë²ˆí˜¸</p>
                <input
                  class="h-10 w-full border"
                  v-model="password"
                  @input="passwordValidate"
                  type="password"
                  maxlength="50"
                  placeholder=" 4 ~ 20ìë¦¬ì˜ ì˜ë¬¸, ìˆ«ì ì¡°í•©ì„ ì…ë ¥í•˜ì„¸ìš”"
                  required
                />
                <p class="text-xs text-red-600" v-show="password.length > 0 && !passwordPass">
                  4ì ~ 20ìì˜ ì˜ë¬¸, ìˆ«ì ì¡°í•©ì„ ì…ë ¥í•˜ì„¸ìš”
                </p>
                <div class="container h-20"></div>
                <button class="h-12 w-full text-white rounded-lg bg-indigo-500 hover:bg-indigo-600">
                  MungMungê³¼ í•¨ê»˜í•˜ê¸°
                </button>
              </div>
            </div>
          </div>
        </div>
      </form>
    </div>
  </div>
</template>

<script>
export default {
  name: 'SignUpForm',
  data() {
    return {
      email: '',
      password: '',
      nickname: '',
      emailFocus: false,
      emailPass: false,
      passwordPass: false,
      nicknamePass: false,
    };
  },
  methods: {
    emailValidate() {
      const emailValid = this.email.match(
        /^(([^<>()[\]\\.,;:\s@]+(\.[^<>()[\]\\.,;:\s@]+)*)|(.+))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,
      );
      this.emailPass = !!emailValid;
    },
    passwordValidate() {
      const passwordValid = this.password.match(/^(?=.*[A-Za-z])(?=.*\d)[A-Za-z\d]{4,20}$/);
      this.passwordPass = !!passwordValid;
    },
    onSubmit() {
      if (this.$refs.form.validate()) {
        const { email, password, nickname } = this;
        this.$emit('submit', { email, password, nickname });
      } else {
        alert('ì˜¬ë°”ë¥¸ ì •ë³´ë¥¼ ì…ë ¥í•˜ì„¸ìš”!');
      }
    },
  },
};
</script>

<style scoped></style>
